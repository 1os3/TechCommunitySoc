# 论坛系统实现任务列表

- [x] 1. 项目初始化和基础架构搭建
  - 创建项目目录结构，包含后端API、用户端前端、管理端前端
  - 初始化Node.js后端项目，配置Express.js、TypeScript、ESLint
  - 初始化React前端项目，配置TypeScript、路由、状态管理
  - 配置开发环境和构建脚本
  - _需求: 10.1_

- [x] 2. 数据库设计和模型实现
  - [x] 2.1 创建PostgreSQL数据库连接和配置
    - 实现数据库连接管理器，配置Sequelize ORM
    - 创建数据库初始化脚本和迁移机制
    - 编写数据库连接测试用例
    - _需求: 10.1, 10.2, 10.3_

  - [x] 2.2 实现用户数据模型
    - 创建User模型，包含用户名、邮箱、密码哈希、验证状态等字段
    - 实现用户模型的验证规则和关联关系
    - 编写用户模型的单元测试
    - _需求: 1.1, 1.4, 10.4_

  - [x] 2.3 实现帖子和评论数据模型
    - 创建Post模型，包含标题、内容、作者、统计数据等字段
    - 创建Comment模型，支持层级回复结构
    - 实现帖子和评论的关联关系
    - 编写帖子和评论模型的单元测试
    - _需求: 2.1, 2.2, 4.1, 4.2_

  - [x] 2.4 实现点赞和用户行为数据模型
    - 创建Like模型，支持帖子和评论点赞
    - 创建UserInteraction模型，记录用户行为数据
    - 创建EmailVerification模型，管理邮箱验证token
    - 编写相关模型的单元测试
    - _需求: 3.1, 3.2, 6.1, 1.2, 1.3_

- [x] 3. 用户认证系统实现
  - [x] 3.1 实现用户注册功能
    - 创建用户注册API端点，包含输入验证
    - 实现密码强度验证和邮箱格式验证
    - 集成bcrypt进行密码哈希处理
    - 编写注册功能的集成测试
    - _需求: 1.1, 1.4, 10.4_

  - [x] 3.2 实现邮箱验证系统
    - 配置Nodemailer邮件服务 (仅缺少SMTP发送功能)
    - 实现验证邮件发送功能，生成安全的验证token
    - 创建邮箱验证API端点
    - 编写邮件服务的单元测试和集成测试
    - _需求: 1.2, 1.3, 9.1, 9.4_

  - [x] 3.3 实现用户登录和JWT认证
    - 创建用户登录API端点，验证用户凭据
    - 实现JWT token生成和验证机制
    - 创建认证中间件，保护需要登录的API
    - 编写认证系统的集成测试
    - _需求: 1.4, 1.5_

  - [x] 3.4 实现密码重置功能
    - 创建忘记密码API端点，发送重置邮件
    - 实现密码重置API端点，验证重置token
    - 确保重置token的安全性和一次性使用
    - 编写密码重置功能的集成测试
    - _需求: 9.2, 9.3_

- [x] 4. 帖子管理系统实现
  - [x] 4.1 实现帖子CRUD操作
    - 创建帖子创建API端点，包含权限验证
    - 实现帖子编辑和删除API端点，确保用户只能操作自己的帖子
    - 创建帖子列表和详情查询API端点
    - 编写帖子CRUD操作的集成测试
    - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

  - [x] 4.2 实现帖子统计和计数功能
    - 实现帖子浏览量统计功能
    - 创建点赞数和评论数的实时更新机制
    - 实现帖子列表的分页和排序功能
    - 编写统计功能的单元测试
    - _需求: 2.4, 2.5_

- [x] 5. 评论系统实现
  - [x] 5.1 实现评论CRUD操作
    - 创建评论发布API端点，支持对帖子和评论的回复
    - 实现评论编辑和删除功能，保持回复结构完整
    - 创建评论列表查询API端点，支持层级显示
    - 编写评论系统的集成测试
    - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

  - [x] 5.2 实现评论层级结构处理
    - 实现评论树形结构的构建算法
    - 创建评论排序和分页功能
    - 处理删除评论时的结构保持逻辑
    - 编写层级结构处理的单元测试
    - _需求: 4.2, 4.3, 4.5_

- [x] 6. 点赞系统实现
  - [x] 6.1 实现点赞功能
    - 创建帖子和评论的点赞API端点
    - 实现点赞状态的切换逻辑（点赞/取消点赞）
    - 创建点赞状态查询API端点
    - 编写点赞功能的集成测试
    - _需求: 3.1, 3.2, 3.4, 3.5_

  - [x] 6.2 实现点赞统计和显示
    - 实现点赞数量的实时更新机制
    - 创建用户点赞状态的批量查询功能
    - 优化点赞相关的数据库查询性能
    - 编写点赞统计功能的单元测试
    - _需求: 3.3, 3.4_

- [x] 7. 热度推荐算法实现
  - [x] 7.1 实现基础热度计算算法
    - 创建热度分数计算函数，综合点赞数、评论数、时间因素
    - 实现热度分数的定期更新机制
    - 创建热门帖子查询API端点
    - 编写热度算法的单元测试
    - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

  - [x] 7.2 实现热度分数更新机制
    - 创建热度分数的异步更新任务
    - 实现基于用户互动的实时热度更新
    - 优化热度计算的性能和准确性
    - 编写热度更新机制的集成测试
    - _需求: 5.3, 5.4_

'''
- [ ] 8. 个性化推荐系统实现（暂时跳过）
  - [x] 8.1 实现用户行为追踪
    - 创建用户行为记录中间件，追踪浏览、点赞、评论行为
    - 实现用户兴趣偏好的数据收集和存储
    - 创建用户行为分析API端点
    - 编写行为追踪功能的单元测试
    - _需求: 6.1, 6.3_

  - [ ] 8.2 实现个性化推荐算法
    - 实现基于协同过滤的推荐算法
    - 创建基于内容的推荐算法
    - 实现新用户的默认推荐策略
    - 编写推荐算法的单元测试
    - _需求: 6.2, 6.4, 6.5_

  - [ ] 8.3 创建推荐API端点
    - 创建个性化推荐API端点
    - 实现推荐结果的缓存机制
    - 创建推荐效果的反馈收集功能
    - 编写推荐API的集成测试
    - _需求: 6.2, 6.4_
'''

- [ ] 9. 用户端前端界面实现
  - [x] 9.1 实现用户认证界面
    - 创建用户注册页面，包含表单验证
    - 创建用户登录页面和忘记密码页面
    - 实现邮箱验证提示和处理页面
    - 编写认证界面的组件测试
    - _需求: 1.1, 1.2, 1.3, 1.4, 7.4_

  - [x] 9.2 实现帖子浏览界面
    - 查看后端相关API
    - 创建帖子列表页面，支持分页和排序
    - 创建帖子详情页面，显示完整内容和评论
    - 实现帖子搜索和筛选功能
    - 编写帖子浏览界面的组件测试
    - _需求: 2.4, 2.5, 7.1, 7.2, 7.3_

  - [x] 9.3 实现帖子创建和编辑界面
    - 创建帖子发布页面，包含富文本编辑器
    - 创建帖子编辑页面，支持内容修改
    - 实现帖子草稿保存功能
    - 编写帖子编辑界面的组件测试
    - _需求: 2.1, 2.2, 7.4_

  - [x] 9.4 实现评论和互动界面
    - 创建评论显示组件，支持层级结构
    - 实现评论发布和回复功能
    - 创建点赞按钮和状态显示组件
    - 编写评论互动界面的组件测试
    - _需求: 4.1, 4.2, 4.3, 3.1, 3.2, 3.4, 7.4_

  - [x] 9.5 实现个人中心和账号管理
    - 创建导航菜单和用户个人中心
    - 个人中心应当显示所有该账号发过的帖子和评论
    - 个人中心需要可以调用帖子编辑器对帖子进行编辑或删除
    - 当他人点赞或回复时要能够收到消息提醒
    - 账号管理需要能够重置密码（需要当前密码）
    - 账号管理需要能够删除账号（需要当前密码）
    - 账号管理需要能够退出登录

- [ ] 10. 管理端界面实现
  - [x] 10.1 实现管理员认证和权限控制
    - 创建管理员登录界面
    - 实现管理员权限验证中间件
    - 创建管理员角色和权限管理功能
    - 编写管理员认证的集成测试
    - _需求: 8.1_

  - [x] 10.2 实现用户管理界面
    - 创建用户列表管理页面
    - 实现用户状态管理功能（启用（就是撤销软删除，目前后端应该还没实现）/禁用（就是当前后端实现的软删除））
    - 使用后端搜索功能实现用户搜索
    - _需求: 8.2, 8.3_

  - [x] 10.3 实现内容管理界面
    - 创建帖子管理页面，支持批量操作
    - 实现违规内容的审核和删除功能
    - 创建评论管理和审核功能
    - 支持站长或管理员自定义违规词
    - _需求: 8.4_

  - [x] 10.4 实现系统统计和监控界面
    - 创建系统统计仪表板
    - 实现用户活跃度和内容统计图表
    - 创建系统日志查看功能

- [ ] 11. 系统集成和优化
  - [ ] 11.1 实现错误处理和日志系统
    - 创建统一的错误处理中间件
    - 实现系统日志记录和管理
    - 创建错误监控和报警机制
    - 编写错误处理的集成测试
    - _需求: 9.3, 9.4_

  - [ ] 11.2 实现性能优化
    - 优化数据库查询性能，添加必要索引
    - 实现API响应缓存机制
    - 优化前端资源加载和渲染性能
    - 编写性能测试用例
    - _需求: 7.5_

  - [ ] 11.3 实现安全加固
    - 实现API请求频率限制
    - 加强输入验证和XSS防护
    - 实现CSRF保护机制
    - 编写安全测试用例
    - _需求: 1.1, 1.4, 10.4_

- [ ] 12. 测试和部署准备
  - [ ] 12.1 完善测试覆盖率
    - 补充缺失的单元测试用例
    - 编写端到端测试场景
    - 实现测试数据的自动化管理
    - 达到80%以上的测试覆盖率
    - _需求: 所有需求的验证_

  - [ ] 12.2 准备生产环境配置
    - 创建生产环境配置文件
    - 实现数据库备份和恢复机制
    - 配置邮件服务的生产环境设置
    - 编写部署文档和操作手册
    - _需求: 9.5, 10.5_